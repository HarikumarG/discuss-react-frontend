(this["webpackJsonpdiscuss-react-frontend"]=this["webpackJsonpdiscuss-react-frontend"]||[]).push([[0],{32:function(e,t,s){},33:function(e,t,s){"use strict";s.r(t);var n=s(1),i=s(19),a=s.n(i),c=(s(25),s(4)),r=s(5),o=s(7),l=s(6),d=s(2),u=s(11),h=s(8),m=Object(h.a)(),j={user_id:void 0,user_name:void 0,email_id:void 0,jwt_token:void 0};var p={setAuthenticatedUser:function(e,t,s,n){j.user_id=e,j.user_name=t,j.email_id=s,j.jwt_token=n},clearAuthenticatedUser:function(){j.user_id=void 0,j.user_name=void 0,j.email_id=void 0,j.jwt_token=void 0},authUser:j},b=s(0),O=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={emailId:"",password:""},p.authUser.user_id&&m.push("/discussions-list/discussions"),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsx)("div",{className:"modal-header",children:Object(b.jsx)("h5",{className:"modal-title",children:"Login Discuss Forum"})}),Object(b.jsx)("div",{className:"modal-body",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})},className:"form-control",placeholder:"Enter Email"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},className:"form-control",type:"password",placeholder:"Enter Password"})]})}),Object(b.jsx)("div",{className:"modal-footer modal-footer-button-center",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary width-200",onClick:this.onLogin.bind(this),children:"Sign In"})}),Object(b.jsx)("div",{className:"mb-10 align-center",children:Object(b.jsx)(u.a,{to:"/accounts/signup",className:"link-to",children:"Create an Account?"})})]})})})}},{key:"onLogin",value:function(){var e=JSON.parse(JSON.stringify(this.state));this.loginValid(e)?this.sendLoginRequest(e):alert("The Fields cannot be empty")}},{key:"loginValid",value:function(e){return!!e&&(!(!e.emailId||/^\s*$/.test(e.emailId))&&!(!e.password||/^\s*$/.test(e.password)))}},{key:"sendLoginRequest",value:function(e){var t=this;fetch("https://discuss-topic-server.herokuapp.com/accounts/signin",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({email_id:e.emailId,password:e.password})}).then((function(e){return e.json()})).then((function(e){if("LOGIN SUCCESSFUL"===e.STATUS){var s=e.DATA;s&&s._id&&s.user_name&&s.email_id&&e.JWT_TOKEN?(t.setAuthUser(s,e.JWT_TOKEN),m.push("/discussions-list/discussions")):(alert("Something went wrong! Kindly try again"),window.location.reload())}else"UNAUTHORIZED"===e.STATUS?(alert("Incorrect Credentials"),window.location.reload()):(alert("Something went wrong! Kindly try again"),window.location.reload())})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}},{key:"setAuthUser",value:function(e,t){p.setAuthenticatedUser(e._id,e.user_name,e.email_id,t)}}]),s}(n.Component),y=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={userName:"",emailId:"",password:""},p.authUser.user_id&&m.push("/discussions-list/discussions"),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsx)("div",{className:"modal-header",children:Object(b.jsx)("h5",{className:"modal-title",children:"Register Discuss Forum"})}),Object(b.jsx)("div",{className:"modal-body",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("input",{value:this.state.userName,onChange:function(t){return e.setState({userName:t.target.value})},className:"form-control",placeholder:"Enter User Name"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{value:this.state.emailId,onChange:function(t){return e.setState({emailId:t.target.value})},className:"form-control",placeholder:"Enter Email"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},className:"form-control",type:"password",placeholder:"Enter Password"})]})}),Object(b.jsx)("div",{className:"modal-footer modal-footer-button-center",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary width-200",onClick:this.onRegister.bind(this),children:"Sign Up"})}),Object(b.jsx)("div",{className:"mb-10 align-center",children:Object(b.jsx)(u.a,{to:"/accounts/signin",className:"link-to",children:"Already have an Account?"})})]})})})}},{key:"onRegister",value:function(){var e=JSON.parse(JSON.stringify(this.state));this.registerValid(e)?this.sendRegisterRequest(e):alert("The Fields cannot be empty")}},{key:"registerValid",value:function(e){return!!e&&(!(!e.userName||/^\s*$/.test(e.userName))&&(!(!e.emailId||/^\s*$/.test(e.emailId))&&!(!e.password||/^\s*$/.test(e.password))))}},{key:"sendRegisterRequest",value:function(e){fetch("https://discuss-topic-server.herokuapp.com/accounts/signup",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({user_name:e.userName,email_id:e.emailId,password:e.password})}).then((function(e){return e.json()})).then((function(e){"REGISTRATION SUCCESSFUL"===e.STATUS?m.push("/accounts/signin"):"ACCOUNT ALREADY EXISTS"===e.STATUS?(alert("Account already exists!"),window.location.reload()):(alert("Something went wrong! Kindly try again"),window.location.reload())})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}}]),s}(n.Component),g=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={userAuthenticated:!!p.authUser.user_id,hideCreateDiscussion:e.hideCreateDiscussion},n}return Object(r.a)(s,[{key:"render",value:function(){return Object(b.jsxs)("nav",{className:"navbar navbar-light bg-light justify-content-between",children:[Object(b.jsx)("a",{className:"navbar-brand",children:Object(b.jsx)("strong",{children:"Discussion Forum"})}),Object(b.jsxs)("div",{className:"form-inline",children:[this.state.userAuthenticated&&!this.state.hideCreateDiscussion&&Object(b.jsx)("button",{className:"btn btn-outline-primary my-2 my-sm-0 mr-10",onClick:function(){return m.push("/discussions-list/discussions/create-discussion")},children:"Create Discussion"}),!0===this.state.userAuthenticated?Object(b.jsx)("button",{className:"btn btn-outline-danger my-2 my-sm-0",onClick:this.onLogout.bind(this),children:"SignOut"}):Object(b.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",onClick:function(){return m.push("/accounts/signin")},children:"SignIn"})]})]})}},{key:"onLogout",value:function(){if(this.state.userAuthenticated){var e={method:"post",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+p.authUser.jwt_token}),body:JSON.stringify({user_id:p.authUser.user_id})};fetch("https://discuss-topic-server.herokuapp.com/accounts/signout",e).then((function(e){return e.json()})).then((function(e){"LOGOUT SUCCESSFUL"===e.STATUS?(p.clearAuthenticatedUser(),m.push("/accounts/signin")):"UNAUTHORIZED"===e.STATUS?(alert("Kindly Login and Try again"),window.location.reload()):(alert("Something went wrong! Kindly try again"),window.location.reload())})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}}}]),s}(n.Component),v=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={discussionsData:[]},n}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.sendGetDiscussionsListRequest()}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{}),Object(b.jsxs)("div",{className:"container all-discussions",children:[Object(b.jsx)("hgroup",{className:"mb-20",children:Object(b.jsx)("h1",{children:"All Discussions"})}),Object(b.jsx)("section",{className:"col-xs-12 col-sm-6 col-md-12",style:{maxHeight:"450px",overflowY:"auto"},children:this.state.discussionsData.map((function(e){return Object(b.jsx)("article",{className:"search-result row",children:Object(b.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-7",children:[Object(b.jsx)("h3",{children:Object(b.jsx)(u.a,{to:"/discussions-list/discussions/".concat(e._id),className:"link",children:e.topic_name})}),Object(b.jsxs)("small",{className:"text-muted",children:["Created By: ",e.user_id.user_name]})," ",Object(b.jsx)("br",{}),Object(b.jsxs)("small",{className:"text-muted",children:["Created Time: ",e.topic_created_time]})]})},e._id)}))})]})]})}},{key:"sendGetDiscussionsListRequest",value:function(){var e=this;fetch("https://discuss-topic-server.herokuapp.com/discussions-list/discussions",{method:"get",headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(t){if("SUCCESS"===t.STATUS){var s=t.DATA;if(s){for(var n=0;n<s.length;n++)s[n].topic_created_time=new Date(s[n].topic_created_time).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"});e.setState({discussionsData:s})}else alert("Something went wrong! Kindly try again"),window.location.reload()}else alert("Something went wrong! Kindly try again"),window.location.reload()})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}}]),s}(n.Component),x=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={topic_name:"",description:""},void 0===p.authUser.user_id&&m.push("/accounts/signin"),n}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{hideCreateDiscussion:!0}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsxs)("div",{className:"modal-header",children:[Object(b.jsx)("h4",{children:"Create Discussion"}),Object(b.jsx)("button",{type:"button",className:"btn btn-light",onClick:function(){return m.goBack()},children:" Back "})]}),Object(b.jsx)("div",{className:"modal-body chat-body",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("div",{className:"md-form",children:[Object(b.jsx)("label",{children:"Topic: "}),Object(b.jsx)("textarea",{id:"create-discussion-title",value:this.state.topic_name,onChange:function(t){return e.setState({topic_name:t.target.value})},className:"md-textarea form-control",rows:"1"})]}),Object(b.jsxs)("div",{className:"form-group mt-10",children:[Object(b.jsx)("label",{children:"Description:"}),Object(b.jsx)("textarea",{className:"form-control",id:"create-discussion-description",onChange:function(t){return e.setState({description:t.target.value})},value:this.state.description,rows:"10"})]})]})}),Object(b.jsx)("div",{className:"modal-footer",children:Object(b.jsx)("div",{className:"input-group justify-space-even",children:Object(b.jsx)("span",{className:"input-group-btn",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary width-200",onClick:this.onCreateDiscussion.bind(this),children:" Create "})})})})]})})})]})}},{key:"onCreateDiscussion",value:function(){var e=JSON.parse(JSON.stringify(this.state));this.createDiscussionValid(e)?this.sendCreateDiscussionRequest(e.topic_name,e.description):alert("The Fields cannot be empty")}},{key:"createDiscussionValid",value:function(e){return!!e&&(!(!e.topic_name||/^\s*$/.test(e.topic_name))&&!(!e.description||/^\s*$/.test(e.description)))}},{key:"sendCreateDiscussionRequest",value:function(e,t){if(p.authUser.user_id){var s={method:"post",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+p.authUser.jwt_token}),body:JSON.stringify({user_id:p.authUser.user_id,topic_name:e,description:t})};fetch("https://discuss-topic-server.herokuapp.com/discussions-list/create-discussion",s).then((function(e){return e.json()})).then((function(e){"SUCCESS"===e.STATUS?m.push("/discussions-list/discussions"):"UNAUTHORIZED"===e.STATUS?(alert("Kindly Login and Try again"),window.location.reload()):(alert("Something went wrong! Kindly try again"),window.location.reload())})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}}}]),s}(n.Component),f=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={discussionData:{},replyData:[],userAuthenticated:!!p.authUser.user_id,replyValue:""},n}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.topic_id;this.sendGetDiscussionRequest(e),this.setState({topic_id:e})}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{}),Object(b.jsx)("div",{className:"container all-discussions",children:this.state.discussionData.user_id&&this.state.replyData&&Object(b.jsxs)("div",{children:[Object(b.jsxs)("hgroup",{className:"mb-20",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(b.jsx)("h1",{children:"Discussion"}),Object(b.jsx)("button",{className:"btn btn-primary",onClick:function(){return m.push("/discussions-list/discussions")},children:"View All Discussions"})]}),Object(b.jsxs)("small",{className:"text-muted",children:["Created By: ",this.state.discussionData.user_id.user_name]})," ",Object(b.jsx)("br",{}),Object(b.jsxs)("small",{className:"text-muted",children:["Created Time: ",this.state.discussionData.topic_created_time]})]}),Object(b.jsxs)("section",{className:"col-xs-12 col-sm-6 col-md-12",children:[Object(b.jsx)("article",{className:"search-result row",children:Object(b.jsxs)("div",{className:"col-xs-12 col-sm-12 col-md-7",children:[Object(b.jsx)("h3",{children:Object(b.jsx)("a",{children:this.state.discussionData.topic_name})}),Object(b.jsx)("p",{children:this.state.discussionData.description})]})}),Object(b.jsx)("small",{className:"text-muter",children:Object(b.jsx)("strong",{children:"Comments:"})}),this.state.replyData.length>0?Object(b.jsx)("div",{className:"reply-content",style:{maxHeight:"200px",overflowY:"auto"},children:this.state.replyData.map((function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{id:"reply-id",children:e.reply_content}),Object(b.jsxs)("small",{className:"text-muted",children:["Created By: ",e.user_id.user_name]})," ",Object(b.jsx)("br",{}),Object(b.jsxs)("small",{className:"text-muted",children:["Created Time: ",e.reply_created_time]})]},e._id)}))}):Object(b.jsx)("div",{children:Object(b.jsx)("small",{className:"text-muted",children:"No Comments Yet"})}),this.state.userAuthenticated&&Object(b.jsxs)("div",{className:"input-group",children:[Object(b.jsx)("input",{type:"text",value:this.state.replyValue,onChange:function(t){return e.setState({replyValue:t.target.value})},className:"form-control input-sm",placeholder:"your reply here..."}),Object(b.jsx)("span",{className:"input-group-btn",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.onCreateReply.bind(this),children:"reply"})})]})]})]})})]})}},{key:"sendGetDiscussionRequest",value:function(e){var t=this;fetch("https://discuss-topic-server.herokuapp.com/discussions-list/discussions/"+e,{method:"get",headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){if("SUCCESS"===e.STATUS){var s=e.DATA;if(s&&s.topic_data&&s.reply_data){s.topic_data.topic_created_time=new Date(s.topic_data.topic_created_time).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"});for(var n=0;n<s.reply_data.length;n++)s.reply_data[n].reply_created_time=new Date(s.reply_data[n].reply_created_time).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"});t.setState({discussionData:s.topic_data,replyData:s.reply_data})}else alert("Something went wrong! Kindly try again"),window.location.reload()}else alert("Something went wrong! Kindly try again"),window.location.reload()})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}},{key:"onCreateReply",value:function(){if(this.state.replyValue&&!/^\s*$/.test(this.state.replyValue)){var e=JSON.parse(JSON.stringify(this.state));this.sendCreateReplyRequest(e),this.setState({replyValue:""})}}},{key:"sendCreateReplyRequest",value:function(e){var t=this;if(this.state.userAuthenticated){var s="https://discuss-topic-server.herokuapp.com/discussions-list/discussions/"+e.topic_id+"/create-reply",n={method:"post",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+p.authUser.jwt_token}),body:JSON.stringify({user_id:p.authUser.user_id,reply_content:e.replyValue})};fetch(s,n).then((function(e){return e.json()})).then((function(e){"SUCCESS"===e.STATUS?t.componentDidMount():"UNAUTHORIZED"===e.STATUS?(alert("Kindly Login and Try again"),window.location.reload()):(alert("Something went wrong! Kindly try again"),window.location.reload())})).catch((function(e){console.log(e),alert("Something went wrong! Kindly try again")}))}}}]),s}(n.Component),w=function(){return Object(b.jsx)(d.b,{history:m,children:Object(b.jsxs)(d.c,{children:[Object(b.jsx)(d.a,{exact:!0,path:"/",render:function(){return m.push("/accounts/signin")}}),Object(b.jsx)(d.a,{exact:!0,path:"/accounts/signin",component:O}),Object(b.jsx)(d.a,{exact:!0,path:"/accounts/signup",component:y}),Object(b.jsx)(d.a,{exact:!0,path:"/discussions-list/discussions",component:v}),Object(b.jsx)(d.a,{exact:!0,path:"/discussions-list/discussions/create-discussion",component:x}),Object(b.jsx)(d.a,{exact:!0,path:"/discussions-list/discussions/:topic_id",component:f})]})})},S=function(e){Object(o.a)(s,e);var t=Object(l.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return Object(b.jsx)(w,{})}}]),s}(s(1).Component);s(32),a.a.render(Object(b.jsx)(S,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.71a13315.chunk.js.map